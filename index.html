<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<title data-i18n="meta.title">Муринск — город в Minecraft</title>
<meta name="description" data-i18n-content="meta.description" content="Murinsk (Муринск) — город в Minecraft. Официальный сайт проекта: история, карта города, галерея и развитие. visitmurinsk.ru">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://visitmurinsk.ru">
<link rel="icon" type="image/png" href="/favicon.png">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
:root{
--bg:#f5f5f7;
--text:#1d1d1f;
--sub:#6e6e73;
--glass:rgba(255,255,255,.7);
--menu:rgba(255,255,255,.95);
--shadow:rgba(0,0,0,.12);
--card:#ffffff;
}
body.dark{
--bg:#0d0d0f;
--text:#f5f5f7;
--sub:#a1a1a6;
--glass:rgba(30,30,32,.75);
--menu:rgba(35,35,38,.95);
--shadow:rgba(0,0,0,.45);
--card:#18181b;
}
*{margin:0;padding:0;box-sizing:border-box}
body{
font-family:'Press Start 2P', monospace;
background:var(--bg);
color:var(--text);
transition:.3s;
}

header{position:fixed;top:0;left:0;right:0;z-index:1000}
.header-inner{
max-width:1200px;
margin:14px auto;
padding:14px 26px;
display:flex;
justify-content:space-between;
align-items:center;
background:var(--glass);
backdrop-filter:blur(30px);
border-radius:999px;
box-shadow:0 10px 28px var(--shadow)
}
@media (max-width:768px){
.header-inner{margin:14px 14px;padding:14px 18px;}
}

.logo{font-family:'Unbounded',sans-serif;font-weight:700;font-size:18px;position:relative;z-index:2;pointer-events:auto}
.controls{display:flex;gap:10px}
button{border:none;background:var(--glass);color:var(--text);cursor:pointer;box-shadow:0 6px 16px var(--shadow);display:flex;align-items:center;justify-content:center;}
#langBtn{font-family:'Unbounded',sans-serif;width:44px;height:36px;border-radius:999px;font-size:12px;transition:transform .2s;}
#langBtn:active{transform:scale(.9)}
#themeBtn{width:36px;height:36px;border-radius:50%;position:relative;overflow:hidden;}
#themeBtn svg{position:absolute;width:20px;height:20px;fill:currentColor;transition: transform .5s cubic-bezier(.4,0,.2,1), opacity .3s;}
#sun{opacity:1; transform: translateX(0) rotate(0deg);}
#moon{opacity:0; transform: translateX(15px) rotate(90deg);}
body.dark #sun{opacity:0; transform: translateX(15px) rotate(90deg);}
body.dark #moon{opacity:1; transform: translateX(0) rotate(0deg);}
#menuBtn{width:36px;height:36px;border-radius:50%;position:relative}
#menuBtn span{position:absolute;left:50%;top:50%;width:18px;height:2px;background:var(--text);transition:.25s}
#menuBtn span:first-child{transform:translate(-50%,-50%) translateY(-4px)}
#menuBtn span:last-child{transform:translate(-50%,-50%) translateY(4px)}
#menuBtn.open span:first-child{transform:translate(-50%,-50%) rotate(45deg)}
#menuBtn.open span:last-child{transform:translate(-50%,-50%) rotate(-45deg)}

nav{position:absolute;top:100%;left:50%;transform:translateX(-50%) translateY(-10px);background:var(--menu);padding:28px 48px;border-radius:32px;box-shadow:0 18px 40px var(--shadow);display:flex;flex-direction:column;gap:20px;text-align:center;opacity:0;pointer-events:none;transition:.3s;min-width:clamp(260px,70vw,420px);}
nav.show{opacity:1;pointer-events:auto;transform:translateX(-50%) translateY(10px)}
nav a{color:var(--text);text-decoration:none;font-size:12px;opacity:0;transform:translateY(-12px);transition:opacity .35s ease,transform .45s cubic-bezier(.4,0,.2,1);}
nav a.active{text-decoration:underline;text-decoration-thickness:2px;text-underline-offset:6px;text-shadow:0 0 12px color-mix(in srgb,var(--text) 45%,transparent);}
nav.show a{opacity:1;transform:translateY(0);} 
nav.show a:nth-child(1){transition-delay:.05s}
nav.show a:nth-child(2){transition-delay:.1s}
nav.show a:nth-child(3){transition-delay:.15s}
nav.show a:nth-child(4){transition-delay:.2s}

.parallax-wrapper {overflow: hidden;}
.parallax-section {position: relative;height: 100vh;display: flex;align-items: center;justify-content: center;overflow: hidden;}
.parallax-bg {position:absolute;top:-10%;left:0;width:100%;height:120%;background-image:url('IMG_3489.png');background-size:cover;background-position:center;z-index:-1;will-change:transform;transform:translate3d(0,0,0);}
.parallax-content{color:white;text-align:center;padding:20px;max-width:980px;}
.parallax-content h1{font-size:clamp(2rem,8vw,5rem);line-height:1.15;text-transform:uppercase;text-shadow:0px 5px 15px rgba(0,0,0,.8);margin:0;}

.hero-title-lines{display:inline-flex;flex-direction:column;align-items:center;gap:.12em;}
.hero-title-line,.hero-title-single{display:inline-block;opacity:0;transform:translateX(-26px);clip-path:inset(0 100% 0 0);}
.hero-title-line.is-animating,.hero-title-single.is-animating{animation:heroSlideReveal .85s cubic-bezier(.2,.65,.2,1) forwards;}
.hero-title-line.is-animating:nth-child(2){animation-delay:.12s;}
@keyframes heroSlideReveal {from{opacity:0;transform:translateX(-26px);clip-path:inset(0 100% 0 0);}to{opacity:1;transform:translateX(0);clip-path:inset(0 0 0 0);}}

main{padding-bottom:80px;}
.city-showcase{max-width:1150px;margin:0 auto;padding:80px 20px 0;display:grid;gap:42px;}
.showcase-card{background:var(--card);border-radius:28px;box-shadow:0 20px 45px var(--shadow);overflow:hidden;display:grid;grid-template-columns:1.15fr 1fr;min-height:360px;}
.showcase-card.reverse{grid-template-columns:1fr 1.15fr;}
.showcase-card.reverse .card-media{order:2;}
.card-media img{width:100%;height:100%;object-fit:cover;display:block;filter:saturate(1.1);}
.card-body{padding:34px;display:flex;flex-direction:column;justify-content:center;gap:20px;}
.card-title{font-family:'Unbounded',sans-serif;font-size:clamp(1.1rem,2.2vw,1.8rem);line-height:1.35;}
.card-text{font-size:10px;line-height:2;color:var(--sub);}
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:18px;}
.stat-box{background:linear-gradient(135deg, color-mix(in srgb,var(--card) 85%,#6cc6ff 15%), var(--card));padding:24px;border-radius:20px;border:1px solid color-mix(in srgb,var(--text) 10%, transparent);}
.stat-value{font-family:'Unbounded',sans-serif;font-size:1.45rem;margin-bottom:10px;}
.stat-label{font-size:9px;line-height:1.9;color:var(--sub);}

.reveal-drop{opacity:0;transform:translateY(-70px) scale(.97);transition:transform .75s cubic-bezier(.18,.72,.24,1),opacity .65s ease;will-change:transform,opacity;}
.reveal-drop.visible{opacity:1;transform:translateY(0) scale(1);}

footer{text-align:center;padding:40px;font-size:10px;color:var(--sub)}

@media (max-width:900px){
.showcase-card,.showcase-card.reverse{grid-template-columns:1fr;}
.showcase-card.reverse .card-media{order:0;}
.card-media{max-height:320px;}
}
@media (max-width:600px){
.parallax-content h1{font-size:clamp(1.35rem,9vw,2.1rem);}
.card-body{padding:24px;}
.city-showcase{padding-top:64px;gap:28px;}
}
@media (prefers-reduced-motion:reduce){
.hero-title-line,.hero-title-single,.reveal-drop{animation:none!important;transition:none!important;opacity:1;transform:none;clip-path:none;}
}
</style>
</head>
<body>
<header>
<div class="header-inner">
<a class="logo" href="/index.html" style="text-decoration:none;color:inherit;">Murinsk</a>
<div class="controls">
<button id="langBtn">RU</button>
<button id="themeBtn">
<svg id="sun" viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
<svg id="moon" viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"/></svg>
</button>
<button id="menuBtn"><span></span><span></span></button>
</div>
<nav id="menu">
<a href="/" data-i18n="nav.home">Главная</a>
<a href="/gallery.html" data-i18n="nav.gallery">Галерея</a>
<a href="/history.html" data-i18n="nav.history">История</a>
<a href="/review.html" data-i18n="nav.review">Оставить отзыв</a>
</nav>
</div>
</header>

<main>
<div class="parallax-wrapper">
<section class="parallax-section">
<div class="parallax-bg"></div>
<div class="parallax-content">
<h1 data-i18n="hero.title">Добро пожаловать в Муринск!</h1>
</div>
</section>
</div>

<section class="city-showcase">
<article class="showcase-card reveal-drop">
<div class="card-media"><img src="https://images.unsplash.com/photo-1512446816042-444d641267bb?auto=format&fit=crop&w=1400&q=80" alt="Панорама города"></div>
<div class="card-body">
<h2 class="card-title" data-i18n="sections.card1.title">Городские панорамы</h2>
<p class="card-text" data-i18n="sections.card1.text">Муринск сочетает высотные районы, уютные площади и набережные. Каждый квартал строится как отдельная история, поэтому прогулка по городу всегда ощущается как новое приключение.</p>
</div>
</article>

<article class="showcase-card reverse reveal-drop">
<div class="card-media"><img src="https://images.unsplash.com/photo-1519501025264-65ba15a82390?auto=format&fit=crop&w=1400&q=80" alt="Архитектура города"></div>
<div class="card-body">
<h2 class="card-title" data-i18n="sections.card2.title">Архитектура и районы</h2>
<p class="card-text" data-i18n="sections.card2.text">В городе есть старый центр, современный деловой кластер и жилые улицы с парками. Архитектурные стили плавно переходят друг в друга, чтобы карта выглядела живой и цельной.</p>
</div>
</article>

<article class="showcase-card reveal-drop">
<div class="card-media"><img src="https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?auto=format&fit=crop&w=1400&q=80" alt="Ночная жизнь"></div>
<div class="card-body">
<h2 class="card-title" data-i18n="sections.card3.title">Ночной Муринск</h2>
<p class="card-text" data-i18n="sections.card3.text">После захода солнца город преображается: улицы подсвечиваются, витрины загораются, а центральная площадь становится местом встреч и мероприятий.</p>
</div>
</article>

<div class="stats-grid reveal-drop">
<div class="stat-box">
<div class="stat-value" data-i18n="sections.stat1.value">12+</div>
<div class="stat-label" data-i18n="sections.stat1.label">районов с уникальной планировкой и атмосферой</div>
</div>
<div class="stat-box">
<div class="stat-value" data-i18n="sections.stat2.value">80+</div>
<div class="stat-label" data-i18n="sections.stat2.label">городских объектов: от вокзалов до музеев</div>
</div>
<div class="stat-box">
<div class="stat-value" data-i18n="sections.stat3.value">24/7</div>
<div class="stat-label" data-i18n="sections.stat3.label">город готов к экскурсиям, событиям и прогулкам</div>
</div>
</div>

<article class="showcase-card reverse reveal-drop">
<div class="card-media"><img src="https://images.unsplash.com/photo-1467269204594-9661b134dd2b?auto=format&fit=crop&w=1400&q=80" alt="Транспорт"></div>
<div class="card-body">
<h2 class="card-title" data-i18n="sections.card4.title">Транспортная система</h2>
<p class="card-text" data-i18n="sections.card4.text">Метро, проспекты и удобные пересадки помогают быстро перемещаться между районами. Для гостей подготовлены обзорные маршруты по ключевым точкам города.</p>
</div>
</article>

<article class="showcase-card reveal-drop">
<div class="card-media"><img src="https://images.unsplash.com/photo-1479839672679-a46483c0e7c8?auto=format&fit=crop&w=1400&q=80" alt="Парки города"></div>
<div class="card-body">
<h2 class="card-title" data-i18n="sections.card5.title">Парки и общественные пространства</h2>
<p class="card-text" data-i18n="sections.card5.text">В Муринске много мест для отдыха: зелёные скверы, площади для ивентов и длинные пешеходные зоны. Они связывают районы и делают город комфортным для жизни.</p>
</div>
</article>

<article class="showcase-card reverse reveal-drop">
<div class="card-media"><img src="https://images.unsplash.com/photo-1480714378408-67cf0d13bc1b?auto=format&fit=crop&w=1400&q=80" alt="Культура"></div>
<div class="card-body">
<h2 class="card-title" data-i18n="sections.card6.title">Культурный маршрут</h2>
<p class="card-text" data-i18n="sections.card6.text">Театры, выставочные пространства и городские арт-объекты рассказывают историю Муринска через детали. Это готовая программа для презентации города друзьям.</p>
</div>
</article>

<article class="showcase-card reveal-drop">
<div class="card-media"><img src="https://images.unsplash.com/photo-1494522358652-f30e61a60313?auto=format&fit=crop&w=1400&q=80" alt="Вид сверху"></div>
<div class="card-body">
<h2 class="card-title" data-i18n="sections.card7.title">Площадка для больших идей</h2>
<p class="card-text" data-i18n="sections.card7.text">Город постоянно растёт: добавляются новые кварталы, общественные центры и туристические маршруты. Муринск остаётся живым проектом с долгим развитием.</p>
</div>
</article>
</section>
</main>

<footer data-i18n="footer">© Murinsk 2026 · All rights reserved</footer>

<script>
const menuBtn=document.getElementById('menuBtn');
const menu=document.getElementById('menu');
const themeBtn=document.getElementById('themeBtn');
const langBtn=document.getElementById('langBtn');
const parallaxSection=document.querySelector('.parallax-section');
const parallaxBg=document.querySelector('.parallax-bg');
const parallaxSpeed=0.22;
const parallaxSmoothness=0.085;
let parallaxCurrent=0;
let parallaxTarget=0;
let parallaxAnimating=false;
const prefersReducedMotion=window.matchMedia('(prefers-reduced-motion: reduce)');
const mobileHeroQuery=window.matchMedia('(max-width: 600px)');
const heroTitle=document.querySelector('.parallax-content h1');
let heroTypingIsMobile=mobileHeroQuery.matches;

function splitHeroTextIntoLines(text){
const words=text.split(/\s+/).filter(Boolean);
if(words.length<2){return [text];}
const midpoint=Math.ceil(words.length/2);
let bestIndex=midpoint;
let bestDiff=Infinity;
for(let i=1;i<words.length;i++){
const left=words.slice(0,i).join(' ');
const right=words.slice(i).join(' ');
const diff=Math.abs(left.length-right.length);
if(diff<bestDiff){bestDiff=diff;bestIndex=i;}
}
return [words.slice(0,bestIndex).join(' '),words.slice(bestIndex).join(' ')].filter(Boolean);
}

function triggerHeroRevealAnimation(){
if(!heroTitle||prefersReducedMotion.matches){return;}
const animatedNodes=heroTitle.querySelectorAll('.hero-title-line, .hero-title-single');
animatedNodes.forEach(node=>{node.classList.remove('is-animating');void node.offsetWidth;node.classList.add('is-animating');});
}

function runHeroTypingAnimation(){
if(!heroTitle){return;}
const text=heroTitle.textContent.trim();
heroTitle.innerHTML='';
if(!heroTypingIsMobile){
const singleLine=document.createElement('span');
singleLine.className='hero-title-single';
singleLine.textContent=text;
heroTitle.appendChild(singleLine);
triggerHeroRevealAnimation();
return;
}
const linesWrapper=document.createElement('span');
linesWrapper.className='hero-title-lines';
const lines=splitHeroTextIntoLines(text);
lines.forEach(line=>{const lineSpan=document.createElement('span');lineSpan.className='hero-title-line';lineSpan.textContent=line;linesWrapper.appendChild(lineSpan);});
heroTitle.appendChild(linesWrapper);
triggerHeroRevealAnimation();
}

function normalizePath(path){
if(!path){return '/';}
let cleanPath=path.replace(/\/index\.html$/,'/').replace(/\.html$/,'');
if(cleanPath===''){return '/';}
return cleanPath.endsWith('/')&&cleanPath!=='/'?cleanPath.slice(0,-1):cleanPath;
}

function highlightActiveMenuItem(){
const currentPath=normalizePath(window.location.pathname);
document.querySelectorAll('#menu a').forEach(link=>{
const linkPath=normalizePath(new URL(link.getAttribute('href'),window.location.origin).pathname);
link.classList.toggle('active',linkPath===currentPath);
});
}

menuBtn.onclick=()=>{menuBtn.classList.toggle('open');menu.classList.toggle('show');};
highlightActiveMenuItem();

const savedTheme=sessionStorage.getItem('theme');
if(savedTheme==='dark'){document.body.classList.add('dark');}
else if(savedTheme==='light'){document.body.classList.remove('dark');}
else if(matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}

themeBtn.onclick=()=>{
const isDark=document.body.classList.toggle('dark');
sessionStorage.setItem('theme',isDark?'dark':'light');
};

let lang='ru';
const translations={
ru:{
meta:{title:'Муринск — город в Minecraft',description:'Murinsk (Муринск) — город в Minecraft. Официальный сайт проекта: история, карта города, галерея и развитие. visitmurinsk.ru'},
nav:{home:'Главная',gallery:'Галерея',history:'История',review:'Оставить отзыв'},
hero:{title:'Добро пожаловать в Муринск!'},
sections:{
card1:{title:'Городские панорамы',text:'Муринск сочетает высотные районы, уютные площади и набережные. Каждый квартал строится как отдельная история, поэтому прогулка по городу всегда ощущается как новое приключение.'},
card2:{title:'Архитектура и районы',text:'В городе есть старый центр, современный деловой кластер и жилые улицы с парками. Архитектурные стили плавно переходят друг в друга, чтобы карта выглядела живой и цельной.'},
card3:{title:'Ночной Муринск',text:'После захода солнца город преображается: улицы подсвечиваются, витрины загораются, а центральная площадь становится местом встреч и мероприятий.'},
card4:{title:'Транспортная система',text:'Метро, проспекты и удобные пересадки помогают быстро перемещаться между районами. Для гостей подготовлены обзорные маршруты по ключевым точкам города.'},
card5:{title:'Парки и общественные пространства',text:'В Муринске много мест для отдыха: зелёные скверы, площади для ивентов и длинные пешеходные зоны. Они связывают районы и делают город комфортным для жизни.'},
card6:{title:'Культурный маршрут',text:'Театры, выставочные пространства и городские арт-объекты рассказывают историю Муринска через детали. Это готовая программа для презентации города друзьям.'},
card7:{title:'Площадка для больших идей',text:'Город постоянно растёт: добавляются новые кварталы, общественные центры и туристические маршруты. Муринск остаётся живым проектом с долгим развитием.'},
stat1:{value:'12+',label:'районов с уникальной планировкой и атмосферой'},
stat2:{value:'80+',label:'городских объектов: от вокзалов до музеев'},
stat3:{value:'24/7',label:'город готов к экскурсиям, событиям и прогулкам'}
},
footer:'© Murinsk 2026 · Все права защищены'
},
en:{
meta:{title:'Murinsk — a city in Minecraft',description:'Murinsk is a city in Minecraft. Official project website: city history, map, gallery, and development. visitmurinsk.ru'},
nav:{home:'Home',gallery:'Gallery',history:'History',review:'Leave a review'},
hero:{title:'Welcome to Murinsk!'},
sections:{
card1:{title:'City panoramas',text:'Murinsk combines high-rise districts, cozy squares, and river embankments. Every block is built like a separate story, so every walk feels like a new adventure.'},
card2:{title:'Architecture and districts',text:'The city features an old center, a modern business cluster, and residential streets with parks. Styles flow into each other to keep the map lively and coherent.'},
card3:{title:'Murinsk at night',text:'After sunset, the city transforms: streets glow, shop windows light up, and the central square becomes a hub for events and meetings.'},
card4:{title:'Transport system',text:'Metro lines, avenues, and convenient transfers let you move quickly between districts. Visitors can follow ready-made sightseeing routes through key points.'},
card5:{title:'Parks and public spaces',text:'Murinsk has plenty of places to relax: green squares, event plazas, and long pedestrian areas that connect districts and make city life comfortable.'},
card6:{title:'Cultural route',text:'Theaters, exhibition spaces, and urban art objects tell Murinsk’s story through details. It is a ready-made tour for presenting the city to friends.'},
card7:{title:'A platform for big ideas',text:'The city keeps growing with new districts, public centers, and tourist routes. Murinsk remains a living project with long-term development.'},
stat1:{value:'12+',label:'districts with unique planning and atmosphere'},
stat2:{value:'80+',label:'urban locations from stations to museums'},
stat3:{value:'24/7',label:'the city is ready for tours, events, and walks'}
},
footer:'© Murinsk 2026 · All rights reserved'
}
};

function getTranslation(path){return path.split('.').reduce((acc,key)=>acc&&acc[key],translations[lang]);}

function updateLang(){
langBtn.textContent=lang.toUpperCase();
document.querySelectorAll('[data-i18n]').forEach(el=>{const key=el.dataset.i18n;const value=getTranslation(key);if(typeof value==='string'){el.textContent=value;}});
document.querySelectorAll('[data-i18n-content]').forEach(el=>{const key=el.dataset.i18nContent;const value=getTranslation(key);if(typeof value==='string'){el.setAttribute('content',value);}});
document.title=getTranslation('meta.title');
runHeroTypingAnimation();
}

langBtn.onclick=()=>{lang=lang==='ru'?'en':'ru';langBtn.animate([{transform:'scale(1)'},{transform:'scale(1.15)'},{transform:'scale(1)'}],{duration:200});updateLang();};

function handleHeroTypingResize(event){if(heroTypingIsMobile===event.matches){return;}heroTypingIsMobile=event.matches;runHeroTypingAnimation();}
if(typeof mobileHeroQuery.addEventListener==='function'){mobileHeroQuery.addEventListener('change',handleHeroTypingResize);}else if(typeof mobileHeroQuery.addListener==='function'){mobileHeroQuery.addListener(handleHeroTypingResize);}
updateLang();

function updateParallax(){
if(!parallaxSection||!parallaxBg){return;}
if(prefersReducedMotion.matches){parallaxBg.style.transform='translate3d(0, 0, 0)';return;}
const diff=parallaxTarget-parallaxCurrent;
parallaxCurrent+=diff*parallaxSmoothness;
parallaxBg.style.transform=`translate3d(0, ${parallaxCurrent.toFixed(2)}px, 0)`;
if(Math.abs(diff)>0.1){requestAnimationFrame(updateParallax);}else{parallaxAnimating=false;}
}

function requestParallaxUpdate(){
if(!parallaxSection||!parallaxBg){return;}
if(prefersReducedMotion.matches){parallaxBg.style.transform='translate3d(0, 0, 0)';parallaxCurrent=0;parallaxTarget=0;parallaxAnimating=false;return;}
const rect=parallaxSection.getBoundingClientRect();
parallaxTarget=rect.top*parallaxSpeed;
if(!parallaxAnimating){parallaxAnimating=true;requestAnimationFrame(updateParallax);}
}

function initRevealOnScroll(){
if(prefersReducedMotion.matches){return;}
const revealNodes=document.querySelectorAll('.reveal-drop');
const observer=new IntersectionObserver((entries)=>{
entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('visible');observer.unobserve(entry.target);}});
},{threshold:0.18,rootMargin:'0px 0px -40px 0px'});
revealNodes.forEach(node=>observer.observe(node));
}

window.addEventListener('scroll',requestParallaxUpdate,{passive:true});
window.addEventListener('resize',requestParallaxUpdate);
if(typeof prefersReducedMotion.addEventListener==='function'){prefersReducedMotion.addEventListener('change',requestParallaxUpdate);}
requestParallaxUpdate();
initRevealOnScroll();
</script>
</body>
</html>
